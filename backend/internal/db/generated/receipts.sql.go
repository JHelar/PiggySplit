// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: receipts.sql

package generated

import (
	"context"
)

const createReceipt = `-- name: CreateReceipt :one
INSERT INTO group_member_receipts (group_id, user_id, total_dept, current_dept) VALUES (?, ?, ?, ?)
    RETURNING id, group_id, user_id, total_dept, current_dept, updated_at, create_at
`

type CreateReceiptParams struct {
	GroupID     int64   `json:"group_id"`
	UserID      int64   `json:"user_id"`
	TotalDept   float64 `json:"total_dept"`
	CurrentDept float64 `json:"current_dept"`
}

func (q *Queries) CreateReceipt(ctx context.Context, arg CreateReceiptParams) (GroupMemberReceipt, error) {
	row := q.db.QueryRowContext(ctx, createReceipt,
		arg.GroupID,
		arg.UserID,
		arg.TotalDept,
		arg.CurrentDept,
	)
	var i GroupMemberReceipt
	err := row.Scan(
		&i.ID,
		&i.GroupID,
		&i.UserID,
		&i.TotalDept,
		&i.CurrentDept,
		&i.UpdatedAt,
		&i.CreateAt,
	)
	return i, err
}

const updateReceiptDeptById = `-- name: UpdateReceiptDeptById :one
UPDATE group_member_receipts
SET current_dept=current_dept+?1,updated_at=CURRENT_TIMESTAMP
WHERE id=?2
RETURNING id, group_id, user_id, total_dept, current_dept, updated_at, create_at
`

type UpdateReceiptDeptByIdParams struct {
	Amount    float64 `json:"amount"`
	ReceiptID int64   `json:"receipt_id"`
}

func (q *Queries) UpdateReceiptDeptById(ctx context.Context, arg UpdateReceiptDeptByIdParams) (GroupMemberReceipt, error) {
	row := q.db.QueryRowContext(ctx, updateReceiptDeptById, arg.Amount, arg.ReceiptID)
	var i GroupMemberReceipt
	err := row.Scan(
		&i.ID,
		&i.GroupID,
		&i.UserID,
		&i.TotalDept,
		&i.CurrentDept,
		&i.UpdatedAt,
		&i.CreateAt,
	)
	return i, err
}
